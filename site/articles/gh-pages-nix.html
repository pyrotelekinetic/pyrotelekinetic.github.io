<!DOCTYPE html>
<html>

{:../templates/head.html TITLE:"GitHub Pages with Nix":}

<body>
{:../templates/header.html:}

{:../templates/nav.html:}

	<main>
	<article>
{:
	../templates/article-header.html
	TITLE:"GitHub Pages with Nix"
	DATE:UNPUBLISHED
	TIME:UNPUBLISHED
:}

	<section>
	<h3>
		The Origin of Pyrosite
	</h3>

	<p>
		I wanted a website. Pyrosite. Since I don't have a server set up to host
		one, I turned to GitHub Pages. It's free, and I already use GitHub.
	</p>

	<p>
		GitHub Pages is fairly simple by default. You commit the root of your static
		site and GitHub will automatically serve it on your github.io domain. You
		can't do any dynamic site stuff, but I don't want to anyway.
	</p>

	<p>
		The first few iterations of pyrosite were just that: I created a GitHub
		repo, slapped on some HTML and a little CSS, and politely asked GitHub to
		serve it to GitHub Pages.
	</p>

	<p>
		It worked. Things were good.
	</p>
	</section>

	<section>
	<h3>
		I wasn't Satisfied
	</h3>

	<p>
		HTML doesn't have any built in mechanism to reuse code, or markup, or
		whatever it technically is. This sucks.
	</p>

	<p>
		Pyrosite has <i>lots</i> of repetition, as most sites do. Things like a
		footer, for example, are usually (mostly) identical on every page.
	</p>

	<p>
		Why would I rewrite the same thing at the end of every file? This is
		clearly something to automate. Obviously I should create a Nix flake for
		pyrosite. I think you can configure GitHub Pages to run stuff on the code
		before it publishes it, so I'll just have it run <code>nix build</code>.
	</p>

	<p>
		This will definitely work, so looking into whether this will work or not is
		a waste of time. Let's go.
	</p>
	</section>

	<section>
	<h3>
		Tangent Time
	</h3>

	<p>
		I spent at least 15 seconds looking for a suitable preprocessor. There's a
		lot of options, but they all do <i>too much</i>. I wanted something as
		simple as possible; remember, all I want is to be able to pull out repeated
		content into one common file. That's just one step above <code>cat</code>.
	</p>

	<p>
	At this point I took some time to write
	<a style="color:var(--red);"
		href="https://github.com/pyrotelekinetic/yip.git">
	yip</a>, a very simple preprocessor. Expect an article about that "soon".
	</p>
	</section>

	<section>
	<h3>
		Flake Time
	</h3>

	<p>
		First off we'll move everything in the repo to a sub directory. I'll tell
		you why later.
	</p>

	<p>
		Now a flake file. It's called <code>flake.nix</code> and it goes in the root
		of the repo. Inside is a Nix expression, containing the attributes
		<code>inputs</code>, <code>outputs</code>, and sometimes
		<code>description</code>.
	</p>
	</section>

	</article>
	</main>

{:../templates/footer.html YEAR:2023:}

</body>

</html>
